{%- from "collectd/map.jinja" import collectd_settings with context %}

<LoadPlugin "python">
    Globals true
</LoadPlugin>

<Plugin "python">
    ModulePath "{{ collectd_settings.moduledirconfig }}/python/elasticsearch"

    Import "elasticsearch_collectd"

    <Module "elasticsearch_collectd">
        Host {{ collectd_settings.plugins.elasticsearch.host }}
        Port {{ collectd_settings.plugins.elasticsearch.port }}
        Verbose {{ collectd_settings.plugins.elasticsearch.verbose }}
        Cluster "{{ collectd_settings.plugins.elasticsearch.cluster }}"
        EnableIndexStats {{ collectd_settings.plugins.elasticsearch.enable_index_stats }}
        EnableClusterHealth {{ collectd_settings.plugins.elasticsearch.enable_cluster_health }}
        Interval  "{{ collectd_settings.plugins.elasticsearch.interval }}"
{% if collectd_settings.plugins.elasticsearch.indexes is defined %}
        Indexes "{{ collectd_settings.plugins.elasticsearch.indexes }}"
{% endif %}
{% if collectd_settings.plugins.elasticsearch.version is defined %}
        Version "{{ collectd_settings.plugins.elasticsearch.version }}"
{% endif %}
    </Module>
</Plugin>
